
$tiles = @"
        #...##.#.. ..###..### #.#.#####.
        ..#.#..#.# ###...#.#. .#..######
        .###....#. ..#....#.. ..#.......
        ###.##.##. .#.#.#..## ######....
        .###.##### ##...#.### ####.#..#.
        .##.#....# ##.##.###. .#...#.##.
        #...###### ####.#...# #.#####.##
        .....#..## #...##..#. ..#.###...
        #.####...# ##..#..... ..#.......
        #.##...##. ..##.#..#. ..#.###...

        #.##...##. ..##.#..#. ..#.###...
        ##..#.##.. ..#..###.# ##.##....#
        ##.####... .#.####.#. ..#.###..#
        ####.#.#.. ...#.##### ###.#..###
        .#.####... ...##..##. .######.##
        .##..##.#. ....#...## #.#.#.#...
        ....#..#.# #.#.#.##.# #.###.###.
        ..#.#..... .#.##.#..# #.###.##..
        ####.#.... .#..#.##.. .######...
        ...#.#.#.# ###.##.#.. .##...####

        ...#.#.#.# ###.##.#.. .##...####
        ..#.#.###. ..##.##.## #..#.##..#
        ..####.### ##.#...##. .#.#..#.##
        #..#.#..#. ...#.#.#.. .####.###.
        .#..####.# #..#.#.#.# ####.###..
        .#####..## #####...#. .##....##.
        ##.##..#.. ..#...#... .####...#.
        #.#.###... .##..##... .####.##.#
        #...###... ..##...#.. ...#..####
        ..#.#....# ##.#.#.... ...##.....

"@


$lines  = $tiles.Split("`n") | Foreach { $_.Trim() + " " }
$width  = $lines[0].Length / 11
$height = $width

function stringToInt($s)
{
    return [Convert]::ToInt32(($s.Replace("#", "1").Replace(".", "0")), 2)
}

for ($h = 0; $h -lt $height; $h++)
{
    for ($w = 0; $w -lt $width; $w++)
    {
        $tile = $lines |
            Select -Skip (11*$h) -First 10 |
            ForEach { $_.Substring(($w*11), 10) }

        $top     = stringToInt ($tile[0])
        $right   = stringToInt ([string]::Join("", ($tile | Foreach { $_[9] })))
        $bottom  = stringToInt ($tile[9])
        $left    = stringToInt ([string]::Join("", ($tile | Foreach { $_[0] })))

        "[$top, $right, $bottom, $left]"
    }
}

